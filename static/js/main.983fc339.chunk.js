(window["webpackJsonpneighborhood-map"]=window["webpackJsonpneighborhood-map"]||[]).push([[0],{26:function(e,r,t){e.exports=t(55)},35:function(e,r,t){},54:function(e,r,t){},55:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t.n(n),o=t(4),s=(t(35),t(5)),i=t(3),c=t(7),l=t(6),f=t(13),u=t(8),p=t(11),d=t(2);function m(e,r){return{type:"FILTER_CAFES",cafesFiltered:e,cafesRaw:r}}var g=function(e){function r(e){var t;return Object(s.a)(this,r),(t=Object(c.a)(this,Object(l.a)(r).call(this,e))).markerRefs=[],t}return Object(u.a)(r,e),Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.props.addMarkerRefs(this.markerRefs),window.gm_authFailure=function(){e.props.onGmError()}}}]),Object(i.a)(r,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{role:"Application"},!1===this.props.GmError?a.a.createElement(p.Map,{google:this.props.google,zoom:this.props.startingPosition.zoom,className:"map",initialCenter:{lat:this.props.startingPosition.lat,lng:this.props.startingPosition.lng},style:{width:"100%",height:"100%",position:"relative"}},this.props.cafesRaw.map((function(r,t){return a.a.createElement(p.Marker,{onClick:e.props.onMarkerClick,key:r.name,name:r.name,title:r.name,address:r.address,category:r.category,ref:function(r){return e.markerRefs[t]=r},position:{lat:r.lat,lng:r.lng},icon:{url:"http://maps.google.com/mapfiles/ms/icons/blue.png",size:new e.props.google.maps.Size(32,32)}})})),a.a.createElement(p.InfoWindow,{marker:this.props.activeMarker,visible:this.props.showingInfoWindow},a.a.createElement("div",{className:"info-window"},a.a.createElement("div",{className:"info-window--text"},this.props.selectedPlace.name),a.a.createElement("div",{className:"info-window--text--extra"},"Address: ".concat(this.props.selectedPlace.address)),a.a.createElement("div",{className:"info-window--text--extra"},"Category: ".concat(this.props.selectedPlace.category))))):a.a.createElement("h6",{className:"msg--error"},"Couldn't get response from Google API. Please try refreshing site"))}}]),r}(n.Component),h=Object(p.GoogleApiWrapper)({apiKey:"AIzaSyCJTF1H_9xKdjSbmBkFz96KPCRRPaJfgQ0"})(g),E=Object(d.b)((function(e){return{startingPosition:e.startingPosition,showingInfoWindow:e.showingInfoWindow,activeMarker:e.activeMarker,selectedPlace:e.selectedPlace,cafesRaw:e.cafesRaw,GmError:e.GmError}}),(function(e){return{onMarkerClick:function(r,t,n){return e(function(e,r,t){return{type:"ON_MARKER_CLICK",activeMarker:r,showingInfoWindow:!0,selectedPlace:{name:e.name,address:r.address,category:r.category}}}(r,t))},addMarkerRefs:function(r){return e(function(e){return console.log(e),{type:"ADD_MARKERREFS",markerRefs:e}}(r))},onGmError:function(){return e({type:"ON_GM_ERROR",GmError:!0})}}}))(h),w=function(e){function r(){return Object(s.a)(this,r),Object(c.a)(this,Object(l.a)(r).apply(this,arguments))}return Object(u.a)(r,e),Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.filterCafes(this.props.localCafesFiltered(this.props.query),this.props.localCafesRaw(this.props.query))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"filter"},a.a.createElement("input",{type:"text",placeholder:"Search for Cafes...",className:"filter-input",onChange:function(r){e.props.updateQuery(r.target.value),e.props.filterCafes(e.props.localCafesFiltered(r.target.value),e.props.localCafesRaw(r.target.value))}}),!1===this.props.FsError?this.props.cafesFiltered:a.a.createElement("h6",{className:"msg--error"},"Couldn't get response to query. Please try refreshing site"),a.a.createElement("p",{className:"msg"},"Application uses Foursquare API!"))}}]),r}(n.Component),v=Object(d.b)((function(e){return{cafes:e.cafes,query:e.query,cafesFiltered:e.cafesFiltered,FsError:e.FsError}}),(function(e){return{updateQuery:function(r){return e(function(e){return{type:"UPDATE_QUERY",query:e}}(r))},filterCafes:function(r,t){return e(m(r,t))}}}))(w),y=(t(54),t(24)),R=t.n(y),C=function(e){function r(){var e,t;Object(s.a)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(l.a)(r)).call.apply(e,[this].concat(o)))).localCafesRaw=function(e){return t.props.cafes.filter((function(r){return-1!==r.name.toLowerCase().indexOf(e.toLowerCase())}))},t.localCafesFiltered=function(e){var r=t.props.cafes.filter((function(r){return-1!==r.name.toLowerCase().indexOf(e.toLowerCase())}));return t.props.cafes instanceof Array&&(r=a.a.createElement("ol",{className:"filter-list"},r.map((function(e){return a.a.createElement("li",{key:e.name,lat:e.lat,lng:e.lng,"aria-label":e.name,className:"filter-list-item",tabIndex:0,role:"button","aria-pressed":"false",onClick:function(r){t.props.markerRefs.forEach((function(r){r&&e.name===r.props.title&&r.props.onClick({name:r.props.name},r.marker)}))},onKeyPress:function(r){"Enter"===r.key&&t.props.markerRefs.forEach((function(r){r&&e.name===r.props.title&&r.props.onClick({name:r.props.name},r.marker)}))}},e.name)})))),r},t.initCafes=function(){var e=Object(f.a)(t),r="https://api.foursquare.com/v2/venues/explore?client_id=".concat("REY4XZ5WQ1CNVSH52G2UJ3DYUVOW5A5PVHADYUGGIV5TLDWE","&client_secret=").concat("LMR253UHYAPDUFJ0NV0TRFRHEQ2AEZG4A30BPCCQAWYIQDND","&v=20180323&near=Gdynia&limit=10&query=coffee");R.a.ajax({url:r,dataType:"json",xhrFields:{withCredentials:!1},success:function(r){var t=r.response.groups[0].items.map((function(e,r){return{name:e.venue.name,lat:e.venue.location.lat,lng:e.venue.location.lng,id:e.venue.id,category:e.venue.categories[0].name,address:e.venue.location.address}}));e.props.initCafes(t),e.props.filterCafes(e.localCafesFiltered(e.props.query),e.localCafesRaw(e.props.query))},error:function(){t.props.onFsError()}})},t}return Object(u.a)(r,e),Object(i.a)(r,[{key:"componentDidMount",value:function(){this.initCafes()}},{key:"render",value:function(){return a.a.createElement("div",{className:"app"},a.a.createElement(v,{localCafesRaw:this.localCafesRaw,localCafesFiltered:this.localCafesFiltered}),a.a.createElement(E,{loadingElement:a.a.createElement("div",{style:{height:"100%"}}),containerElement:a.a.createElement("div",{style:{height:"400px"}}),mapElement:a.a.createElement("div",{style:{height:"100%"}})}))}}]),r}(a.a.PureComponent),k=Object(d.b)((function(e){return{cafes:e.cafes,query:e.query,cafesFiltered:e.cafesFiltered,markerRefs:e.markerRefs}}),(function(e){return{initCafes:function(r){return e(function(e){return console.log(e),{type:"INIT_CAFES",cafes:e}}(r))},filterCafes:function(r,t){return e(m(r,t))},onFsError:function(){return e({type:"ON_FS_ERROR",FsError:!0})}}}))(C),b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var F=t(10),j={startingPosition:{lat:54.5193926,lng:18.5353235,zoom:14.95},cafes:[],cafesRaw:[],cafesFiltered:[],query:"",showingInfoWindow:!1,activeMarker:{},selectedPlace:{},markerRefs:[],FsError:!1,GmError:!1},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"INIT_CAFES":return Object.assign({},e,{cafes:r.cafes});case"UPDATE_QUERY":return Object.assign({},e,{query:r.query});case"ON_MARKER_CLICK":return Object.assign({},e,{showingInfoWindow:r.showingInfoWindow,activeMarker:r.activeMarker,selectedPlace:r.selectedPlace});case"FILTER_CAFES":return Object.assign({},e,{cafesFiltered:r.cafesFiltered,cafesRaw:r.cafesRaw});case"ADD_MARKERREFS":return Object.assign({},e,{markerRefs:r.markerRefs});case"ON_FS_ERROR":return Object.assign({},e,{FsError:r.FsError});case"ON_GM_ERROR":return Object.assign({},e,{GmError:r.GmError});default:return e}},P=t(25),N=Object(F.c)(A,Object(F.a)(P.logger));Object(o.render)(a.a.createElement(d.a,{store:N},a.a.createElement(k,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/neighborhood-map",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/neighborhood-map","/service-worker.js");b?(!function(e){fetch(e).then((function(r){404===r.status||-1===r.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):O(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):O(e)}))}}();r.default=N}},[[26,1,2]]]);
//# sourceMappingURL=main.983fc339.chunk.js.map